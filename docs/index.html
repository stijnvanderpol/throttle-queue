<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Throttle Queue Demo</title>

    <style>
        body {
            background-color: #fbfbfb;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .special {
            font-weight: bold;
            color: #C00;
        }

        h3 {
            margin-top: 40px;
        }
    </style>
    <link rel="stylesheet"
    href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/default.min.css">
</head>
<body>
    <div class="container">
        <h1 class="special"><code>throttle-queue</code></h1>
        <hr>

        <p>
            When called, a throttle queued function will put itself in a queue. Each call in the 
            queue will be executed after the configured <code>delay</code>. By default, the first 
            call of the queue will be executed after a timeout of 0ms. This default can be disabled.
            The queued calls can be cancelled by calling the cancel function.
        </p>

        <h3>Demo - Throttle Queued Click Handler</h3>
        <div class="example">
            counter: <span id="counter-value">0</span>
            <button id="increase-count">increase count</button>
            <button id="cancel-count">cancel</button>
        </div>

        <pre><code class="javascript">
// DOM element refs
const counterValue = document.getElementById('counter-value');
const increaseCountButton = document.getElementById('increase-count');
const cancelButton = document.getElementById('cancel-count');

let count = 0;

// non throttle queued click handler
function onClickHandler() {
    count++;
    counterValue.innerHTML = count;
}

// throttle queued click handler
const tqClickHandler = throttleQueue(onClickHandler, 1000);

// assign click handlers
increaseCountButton.onclick = tqClickHandler;
cancelButton.onclick = tqClickHandler.cancel;
        </code></pre>
    </div>
    

    <script type="module">
        import './throttle-queue.js';

        // DOM element refs
        const counterValue = document.getElementById('counter-value');
        const increaseCountButton = document.getElementById('increase-count');
        const cancelButton = document.getElementById('cancel-count');

        let count = 0;

        // non throttle queued click handler
        function onClickHandler() {
            count++;
            counterValue.innerHTML = count;
        }

        // throttle queued click handler
        const tqClickHandler = throttleQueue(onClickHandler, 1000);

        // assign click handlers
        increaseCountButton.onclick = tqClickHandler;
        cancelButton.onclick = tqClickHandler.cancel;
    </script>

    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/highlight.min.js"></script>
    <script>
        hljs.initHighlightingOnLoad();
    </script>
</body>
</html>